# 房间运维设计案（设计阶段）

# 阶段1 - claim 完成

controller 在发现自己等级到达 1 级时，会运行 harvester 的自动规划，发布如下 creep：

- harvester * 2，每个 source 一个，harvester 会自发的在脚下修建和维持 container。

# 阶段2 - container 修建完成

harvester 在 container 修建好时，会运行 filler 和 upgrader 的自动规划，发布如下 creep：

- 对应的 filler * 1，会从新建好的 container 中取出能量并完成房间物流任务。
- 对应的 upgrader * 2，从新建好的 container 中取出能量并升级 controller，为了避免和 filler 抢夺能量，upgrader 只会在 container 中能量大于 500 时才会取用。

当两个 container 都修建好时，场上一共有 harvester * 2、filler * 2、upgrader * 4。

# 阶段3 - storage 修建完成

controller 等级到达 4 级时，布局自动规划会自动放下 storage 的工地。当 storage 建造完成时，会发布 manager。

此时，房间能量填充由两个 filler 和一个 manager 共同完成，filler 从 container 搬运能量到 storage，manager 会从 storage 里获取能量并完成任务。

# 阶段4 - souceLink / centerLink 建成

当 sourceLink 建成后，会检查 centerLink 是否存在，如果存在的话就运行 harvester 的发布规划，会执行如下操作：

- 把 harvester 的角色切换为 collector，并将能量放置目标切换为 sourceLink。由于 collector 不会维护 container，所以 container 会慢慢的掉完耐久然后消失。

当 centerLink 建成后，会运行 harvester 和 corer 的发布规划，执行操作如下：



# 待解决

- filler 是强化版的 manager，会在没有房间物流任务时把能量搬运到 storage。
- builder 需要学会自动调整能量来源。
- 如果有遗留建筑怎么处理