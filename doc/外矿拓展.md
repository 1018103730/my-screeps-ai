# 如何发展一个外矿

本文档介绍如何拓展外矿

## 相关角色

- `remoteHarvester`：外矿采集者，从外矿采集能量并转移到指定建筑
- `reserver`：预定者，负责持续预定房间

## 基本流程

在`creepConfigs`中添加如下角色来拓展一个外矿：

```js
// 外矿采集者
RemoteHarvester1: role.remoteHarvester({
    id: '4ae507741489546', // 外矿的id
    roomName: 'W1N1', // 外矿所在房间名
    x: 27, // 外矿 x 坐标
    y: 12  // 外矿 y 坐标
}, '要转移到建筑id', '出生点名称'),

// 外矿预定者
RemoteResever1: role.reserver({ 
    id: '4ae507741489546', // 房间控制器id
    roomName: 'W1N1', // 要预定的房间名
    x: 11, // 外矿 x 坐标
    y: 22  // 外矿 y 坐标
}, '出生点名称')
```

## 外矿采集者逻辑

1. 从当前位置移动到外矿并采集能量
2. 采集完成后返回目标结构
3. 每移动一次检查脚下的道路是否存在
    1. 若存在，则检查是否需要维修
        1. 若需要维修，则维修
        2. 不需要维修，啥都不做
    2. 若不存在，则检查脚下是否有道路建筑工地
        1. 若存在道路工地，则建造
        2. 不存在道路工地，则在脚下放置道路工地
4. 移动到目标位置，转移能量。

## 预订者逻辑

1. 向指定控制器移动
2. 尝试预定控制器，检查返回值是否正常
    1. 不正常，继续移动
    2. 正常，永远不再移动
3. 控制器预定时间是否超额？
    1. 没有超额，继续预定
    2. 超额，啥都不干